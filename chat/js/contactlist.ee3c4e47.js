(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["contactlist"],{"31e0":function(t,a,e){},"4c18":function(t,a,e){"use strict";e("720e")},"4fbf":function(t,a,e){"use strict";e("85b7")},"5fb9":function(t,a,e){"use strict";e("31e0")},"720e":function(t,a,e){},"85b7":function(t,a,e){},a5b9:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("a-row",{attrs:{type:"flex"}},[e("a-col",{staticClass:"contact-list",attrs:{flex:"300px"}},[e("div",{staticClass:"tab-container"},[e("div",{staticClass:"tab",class:{active:"Chat"===t.curTab},on:{click:function(a){return t.handleTab("Chat")}}},[e("icon-font",{staticClass:"icon",attrs:{type:"icontab_chat"}}),e("span",[t._v("会话")])],1),e("div",{staticClass:"tab",class:{active:"ContactInfo"===t.curTab},on:{click:function(a){return t.handleTab("ContactInfo")}}},[e("icon-font",{staticClass:"icon",attrs:{type:"icontab_addresslist_pre"}}),e("span",[t._v("通讯录")])],1)]),e("div",{staticClass:"input-container"},[e("a-input-search",{attrs:{placeholder:"搜索"},model:{value:t.searchText,callback:function(a){t.searchText=a},expression:"searchText"}})],1),e("div",[e("chat-list",{directives:[{name:"show",rawName:"v-show",value:"Chat"===t.curTab,expression:"curTab === 'Chat'"}],attrs:{selected:"Chat"===t.curTab,searchText:t.searchText,tjId:t.tjId}}),e("address-book",{directives:[{name:"show",rawName:"v-show",value:"ContactInfo"===t.curTab,expression:"curTab === 'ContactInfo'"}],attrs:{selected:"ContactInfo"===t.curTab,searchText:t.searchText,tjId:t.tjId}})],1)]),e("a-col",{attrs:{flex:"auto"}},[e("router-view")],1)],1)],1)},c=[],i=(e("8545"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"chat-list_container"},[t._l(t.chatList,(function(a){return e("div",{key:a.chatId,staticClass:"item",class:{active:t.curChat.chatId===a.chatId},on:{click:function(e){return t.handleItem(a)}}},[2===a.chatType?e("svg-icon",{attrs:{"class-name":"avatar","icon-class":"icon_groupchat"}}):e("img",{staticClass:"avatar",attrs:{src:a.wechatAvatar,alt:""}}),e("div",{staticClass:"info"},[e("div",{staticClass:"nickname ellipsis"},[e("span",{domProps:{innerHTML:t._s(a.wechatName)}}),[1,3].includes(a.chatType)?e("span",{staticClass:"label",style:{color:a.company?"#FF8000":"#0ead63"}},[t._v("@"+t._s(a.company||"微信"))]):e("span",[t._v("（"+t._s(a.memberCount)+"）")])]),e("div",{staticClass:"time"},[t._v(t._s(t._f("timeFilter")(a.lastActiveTime)))]),e("div",{staticClass:"msg ellipsis"},[t._v(t._s(a.content))])])],1)})),0===t.chatList.length?e("no-data"):t._e()],2)}),n=[],r=e("6abc"),o=(e("71d0"),e("09a6"),e("ba67"),e("0af2")),h=e.n(o),l={name:"chatList",data:function(){return{curChat:{chatId:null},chatList:[]}},props:{tjId:{type:String},searchText:{type:String},selected:{type:Boolean}},watch:{$route:{immediate:!0,handler:function(t,a){var e=this;if(t!==a){console.log("chatList $route ==>",t),this.chatList=this.$store.getters.chatsByChatId(this.tjId),console.log("tjId:".concat(this.tjId,"=>chatList"),this.chatList);var s=t.params.contactId;"0"!==s?this.chatList.forEach((function(t){t.chatId===s&&(e.curChat=t)})):this.curChat={chatId:null}}}},searchText:function(t){var a=h()(this.$store.getters.chatsByChatId(this.tjId));this.chatList=t?a.filter((function(a){return a.wechatName&&a.wechatName.indexOf(t)>-1})):a},selected:function(t){t&&this.curChat.chatId&&this.curChat.chatId!==this.$route.params.contactId&&this.handleItem(this.curChat,!0)}},methods:{handleItem:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(t);var e=t.chatId;(this.curChat.chatId!==e||a)&&(this.curChat=t,this.$router.push({path:"/chatframe/".concat(this.tjId,"/recent/").concat(e),query:Object(r["a"])({},this.curChat)}))}}},d=l,u=(e("4fbf"),e("5d22")),m=Object(u["a"])(d,i,n,!1,null,"68433a66",null),p=m.exports,v=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"address-book_container"},[e("div",{staticClass:"address-book_tab"},[e("a-tabs",{attrs:{"default-active-key":t.activeKey,tabBarGutter:5},model:{value:t.activeKey,callback:function(a){t.activeKey=a},expression:"activeKey"}},[e("a-tab-pane",{key:"customer",attrs:{tab:"客户"}},[e("div",{staticClass:"list-wraper"},[t._l(t.customerList,(function(a){return e("div",{key:a.wechatId,staticClass:"item",class:{active:t.curAddress.wechatId===a.wechatId},on:{click:function(e){return t.handleItem(a)}}},[e("img",{staticClass:"avatar",attrs:{src:a.wechatAvatar,alt:""}}),e("div",{staticClass:"nickname ellipsis"},[e("span",{domProps:{innerHTML:t._s(a.wechatName)}}),e("span",{staticClass:"label",style:{color:a.company?"#FF8000":"#0ead63"}},[t._v("@"+t._s(a.company||"微信"))])])])})),0===t.customerList.length?e("no-data"):t._e()],2)]),e("a-tab-pane",{key:"group",attrs:{tab:"群聊"}},[e("div",{staticClass:"list-wraper"},[t._l(t.groupList,(function(a){return e("div",{key:a.wechatId,staticClass:"item",class:{active:t.curAddress.wechatId===a.wechatId},on:{click:function(e){return t.handleItem(a)}}},[e("svg-icon",{attrs:{"class-name":"avatar","icon-class":"icon_groupchat"}}),e("div",{staticClass:"nickname ellipsis"},[e("span",{domProps:{innerHTML:t._s(a.wechatName)}}),e("span",[t._v("（"+t._s(a.memberCount)+"）")])])],1)})),0===t.groupList.length?e("no-data"):t._e()],2)]),e("a-tab-pane",{key:"member",attrs:{tab:"成员"}},[e("div",{staticClass:"list-wraper"},t._l(t.memberList,(function(a){return e("div",{key:a.wechatId,staticClass:"item",class:{active:t.curAddress.wechatId===a.wechatId},on:{click:function(e){return t.handleItem(a)}}},[e("img",{staticClass:"avatar",attrs:{src:a.wechatAvatar,alt:""}}),e("div",{staticClass:"nickname ellipsis"},[e("span",{domProps:{innerHTML:t._s(a.wechatName)}}),e("span",{staticClass:"label",style:{color:a.company?"#FF8000":"#0ead63"}},[t._v("@"+t._s(a.company||"微信"))])])])})),0),0===t.memberList.length?e("no-data"):t._e()],1)],1)],1)])},f=[],I={customer:"1",group:"2",member:"3"},b={name:"addressBook",data:function(){return{activeKey:"customer",curAddress:{},contactInfo:{},customerList:[],groupList:[],memberList:[]}},props:{tjId:{type:String},searchText:{type:String},selected:{type:Boolean}},computed:{contactData:function(){return this.$store.getters.contactByTjId(this.tjId)}},watch:{tjId:{immediate:!0,handler:function(t){console.log("AddressBook tjId:",t),this.activeKey="customer",this.curAddress={}}},contactData:{immediate:!0,handler:function(t){console.log("contactData:",t),t&&this.handleData(t)}},searchText:function(t){var a="".concat(this.activeKey,"List");this[a]=t?this.contactInfo[a].filter((function(a){return a.wechatName&&a.wechatName.indexOf(t)>-1})):this.contactInfo[a]},activeKey:function(t){var a=this,e="".concat(t,"List");this[e]=this.searchText?this.contactInfo[e].filter((function(t){return t.wechatName&&t.wechatName.indexOf(a.searchText)>-1})):this.contactInfo[e]},selected:function(t){t&&this.curAddress.wechatId&&this.curAddress.wechatId!==this.$route.params.contactId&&this.handleItem(this.curAddress,!0)}},methods:{handleItem:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(t);var s=t.wechatId,c=t.tjId;if(this.curAddress.tjId!==c||e){var i=I[this.activeKey],n={};"member"===this.activeKey?n.memberId=c:"customer"===this.activeKey?n.customerId=c:"group"===this.activeKey&&(n.tjId=c),this.$socket.emit("".concat(this.activeKey,"_info"),Object(r["a"])({tjId:this.$route.params.tjId},n),(function(e){console.log(e),a.curAddress=t,a.$router.push({path:"/chatframe/".concat(a.tjId,"/contactInfo/").concat(s,"?type=").concat(i),query:Object(r["a"])(Object(r["a"])({},t),{},{type:i})})}))}},handleData:function(t){var a=h()(t);for(var e in this.contactInfo=a,a)Object.prototype.hasOwnProperty.call(a,e)&&e.indexOf("List")&&(this[e]=a[e])}}},C=b,y=(e("4c18"),Object(u["a"])(C,v,f,!1,null,"ebc1dc72",null)),w=y.exports,_={name:"contactList",components:{ChatList:p,AddressBook:w},props:{tjId:{type:String,required:!0}},watch:{$route:{immediate:!0,handler:function(t,a){t!==a&&(console.log("contactList $route ==>",t),this.curTab=t.name,this.searchText="")}}},data:function(){return{tabOptions:[],curTab:"Chat",searchText:""}},methods:{handleTab:function(t){this.curTab=t,this.searchText=""}}},T=_,g=(e("5fb9"),Object(u["a"])(T,s,c,!1,null,"01c8c18e",null));a["default"]=g.exports}}]);